<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>JNIpp: NativeSound.h</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">JNIpp&#160;<span id="projectnumber">1.0</span></div>
   <div id="projectbrief">JNI meets C++</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('a00006.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">NativeSound.h</div>  </div>
</div>
<div class="contents">
<div class="fragment"><pre class="fragment"><span class="preprocessor">#ifndef NATIVESOUND_INCLUDED</span>
<span class="preprocessor"></span><span class="preprocessor">#define NATIVESOUND_INCLUDED</span>
<span class="preprocessor"></span>
<span class="preprocessor">#include &lt;<a class="code" href="a00023.html" title="Main include file for the JNIpp library.">JNIpp.h</a>&gt;</span>

<span class="comment">/* This example demostrates how JNIpp can be used to provide</span>
<span class="comment"> *  native implementation for a Java class (NativeSound.java).</span>
<span class="comment"> *</span>
<span class="comment"> * Key thing is that native object is constructed from Java code.</span>
<span class="comment"> * Contrast with LiveThread, where things are in reverse: Java object</span>
<span class="comment"> *  is constructed from native code.</span>
<span class="comment"> */</span>


<span class="comment">/***************************************/</span>

<span class="comment">/* Wrapper for NativeSoundException class.</span>
<span class="comment"> */</span>

<span class="keyword">class </span>NativeSoundException;
<span class="keyword">typedef</span> <a name="_a0"></a><a class="code" href="a00017.html" title="Smart pointer for classes derived from Object.">java::ObjectPointer&lt;NativeSoundException&gt;</a> PNativeSoundException;

<span class="comment">/* We don&#39;t declare wrapping constructor because we don&#39;t intend to</span>
<span class="comment"> *  wrap existing NativeSoundException objects. We will be creating</span>
<span class="comment"> *  our own.</span>
<span class="comment"> */</span>
<span class="keyword">class </span>NativeSoundException: <span class="keyword">public</span> java::Exception {
    <a name="a1"></a><a class="code" href="a00026.html#a2e391d0a67033b1f00ce734bc877b480" title="Declares Type to be Java wrapper class.">JB_WRAPPER_CLASS</a>(NativeSoundException);
<span class="keyword">public</span>:
    NativeSoundException(<span class="keyword">const</span> <span class="keywordtype">char</span>* message);
    NativeSoundException(<a class="code" href="a00017.html" title="Smart pointer for classes derived from Object.">java::PString</a> message);
};


<span class="comment">/***************************************/</span>

<span class="comment">/* Wrapper for NativeSound.Checkpoint class.</span>
<span class="comment"> * Currently JNIpp doesn&#39;t allow wrapper or live classes to be inner</span>
<span class="comment"> *  classes, so we declare Checkpoint at global scope and add typedefs</span>
<span class="comment"> *  to the NativeSound class.</span>
<span class="comment"> */</span>
<span class="keyword">class </span>NativeSoundCheckpoint: <span class="keyword">public</span> java::Object {
    <a class="code" href="a00026.html#a2e391d0a67033b1f00ce734bc877b480" title="Declares Type to be Java wrapper class.">JB_WRAPPER_CLASS</a>(NativeSoundCheckpoint);
<span class="keyword">public</span>:
    NativeSoundCheckpoint(<span class="keyword">const</span> <a name="_a2"></a><a class="code" href="a00014.html" title="Wrapper for local Java objects.">jni::LObject</a>&amp; checkpoint);
    
    jlong GetTime() <span class="keyword">const</span>;
    <a class="code" href="a00017.html" title="Smart pointer for classes derived from Object.">java::PObject</a> GetData() <span class="keyword">const</span>;
};


<span class="comment">/***************************************/</span>

<span class="comment">/* Native part of NativeSound.java is declared as ordinary live</span>
<span class="comment"> *  class. Because it can&#39;t be created from native code its</span>
<span class="comment"> *  constructor is private.</span>
<span class="comment"> *</span>
<span class="comment"> * NOTE: before NativeSound can be created from Java callbacks</span>
<span class="comment"> *  need to be registered using NativeSound::RegisterCallbacks().</span>
<span class="comment"> *  See JNI_OnLoad in NativeSound.cpp.</span>
<span class="comment"> */</span>
<span class="keyword">class </span>NativeSound: <span class="keyword">public</span> java::Object {
    <a name="a3"></a><a class="code" href="a00026.html#a01028757b90f4bf31b210fb2e3773c27" title="Declares Type to be Java live class.">JB_LIVE_CLASS</a>(NativeSound);
<span class="keyword">public</span>:
    <span class="comment">/* Typedef NativeSoundCheckpoint to feel like inner class.</span>
<span class="comment">     */</span>
    <span class="keyword">typedef</span> NativeSoundCheckpoint Checkpoint;
    <span class="keyword">typedef</span> <a class="code" href="a00017.html" title="Smart pointer for classes derived from Object.">java::ObjectPointer&lt;Checkpoint&gt;</a> PCheckpoint;
    
    <span class="comment">/* Array typedefs.</span>
<span class="comment">     * PCheckpointArray is most useful.</span>
<span class="comment">     */</span>
    <span class="keyword">typedef</span> <a name="_a4"></a><a class="code" href="a00016.html" title="Wrapper template for object arrays.">java::ObjectArray&lt;Checkpoint&gt;</a> CheckpointArray;
    <span class="keyword">typedef</span> <a class="code" href="a00017.html" title="Smart pointer for classes derived from Object.">java::ObjectPointer&lt;CheckpointArray&gt;</a> PCheckpointArray;
    
<span class="keyword">public</span>:
    <span class="comment">/* Binds to the Java class.</span>
<span class="comment">     */</span>
    <span class="keyword">static</span> <span class="keywordtype">void</span> RegisterCallbacks();

    <span class="comment">/* Currently callback methods can&#39;t be &#39;const&#39;. That will be fixed</span>
<span class="comment">     *  in next release.</span>
<span class="comment">     */</span>
    <a class="code" href="a00017.html" title="Smart pointer for classes derived from Object.">java::PString</a> GetPath();
    
    <span class="keywordtype">void</span> Play();
    <span class="keywordtype">void</span> Stop();
    <span class="keywordtype">void</span> SetCheckpoints(PCheckpointArray checkpoints);
<span class="keyword">private</span>:
    NativeSound(<span class="keyword">const</span> <a class="code" href="a00014.html" title="Wrapper for local Java objects.">jni::LObject</a>&amp;,<a class="code" href="a00017.html" title="Smart pointer for classes derived from Object.">java::PString</a> path);
    <span class="keyword">virtual</span> ~NativeSound();
    
    <span class="comment">/* This callback function will be called when Java object calls</span>
<span class="comment">     *  construct(path). Note that se are binding static callback </span>
<span class="comment">     *  to a non-static Java method. Hence implicit first argument </span>
<span class="comment">     *  will be the Java object itself. We will pass that object to </span>
<span class="comment">     *  the live constructor of the parent class.</span>
<span class="comment">     */</span>
    <span class="keyword">static</span> <span class="keywordtype">void</span> Construct(<span class="keyword">const</span> <a class="code" href="a00014.html" title="Wrapper for local Java objects.">jni::LObject</a>&amp;,<a class="code" href="a00017.html" title="Smart pointer for classes derived from Object.">java::PString</a> path);
<span class="keyword">private</span>:
    <a class="code" href="a00017.html" title="Smart pointer for classes derived from Object.">java::PString</a> m_path;
};

<span class="preprocessor">#endif // NATIVESOUND_INCLUDED</span>
</pre></div> </div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="footer">Generated on Thu Jun 9 2011 01:07:48 for JNIpp by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </li>
    </ul>
  </div>

</body>
</html>
